var todomvc=function(exports){"use strict";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var objects=createCommonjsModule(function(module,exports){var __assign=commonjsGlobal&&commonjsGlobal.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.pathCallbacks=new WeakMap,exports.getSubset=function(keys,obj){return keys.reduce(function(a,c){return __assign({},a,((_a={})[c]=obj[c],_a));var _a},{})},exports.isObject=function(obj){return null!==obj&&"object"==typeof obj&&"[object Object]"===Object.prototype.toString.call(obj)},exports.deepValue=function(obj,path){if(!path)return obj;var i,n,paths=path.split("."),current=obj;for(i=0,n=paths.length;i<n;++i){if(void 0===current[paths[i]])return;current=current[paths[i]]}return current},exports.merge=function(a,b){void 0===a&&(a={});for(var _i=0,_a=Object.keys(b);_i<_a.length;_i++){var k=_a[_i],ak=a[k],bk=b[k];Array.isArray(ak)?ak.push.apply(ak,bk):exports.isObject(ak)?exports.merge(ak,bk):a[k]=bk}return a},exports.ensure=function(map,obj,defaultValue){var lookup=map.get(obj);return lookup?Array.isArray(lookup)&&Array.isArray(defaultValue)?lookup.push.apply(lookup,defaultValue):exports.isObject(lookup)&&exports.merge(lookup,defaultValue):map.set(obj,lookup=defaultValue),lookup},exports.propertyCallbacks=new WeakMap,exports.addPropertyListener=function(obj,property,callback){var _a,val=obj[property],observed=exports.propertyCallbacks.has(obj)&&exports.propertyCallbacks.get(obj)[property];exports.ensure(exports.propertyCallbacks,obj,((_a={})[property]=[callback],_a)),observed||Object.defineProperty(obj,property,{get:function(){return val},set:function(newVal){val=newVal;for(var _i=0,_a=exports.propertyCallbacks.get(obj)[property];_i<_a.length;_i++){(0,_a[_i])(property)}return val}})},exports.createObjectPropertyListener=function(obj,pathStr,callback){var _a,path=pathStr.split("."),property=path.pop(),root=exports.deepValue(obj,path.join("."));exports.ensure(exports.pathCallbacks,obj,((_a={})[pathStr]=[callback],_a)),exports.addPropertyListener(root,property,function(){for(var _i=0,_a=exports.pathCallbacks.get(obj)[pathStr];_i<_a.length;_i++)(0,_a[_i])()})}}),objects$1=unwrapExports(objects),objects_1=objects.pathCallbacks,objects_2=objects.getSubset,objects_3=objects.isObject,objects_4=objects.deepValue,objects_5=objects.merge,objects_6=objects.ensure,objects_7=objects.propertyCallbacks,objects_8=objects.addPropertyListener,objects_9=objects.createObjectPropertyListener,objects$2=Object.freeze({default:objects$1,__moduleExports:objects,pathCallbacks:objects_1,getSubset:objects_2,isObject:objects_3,deepValue:objects_4,merge:objects_5,ensure:objects_6,propertyCallbacks:objects_7,addPropertyListener:objects_8,createObjectPropertyListener:objects_9}),dom=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.allChildNodes=function(node){for(var currentNode,walker=document.createTreeWalker(node,NodeFilter.SHOW_ALL,null,!1),nodes=[];((currentNode=walker.currentNode).nodeType!==Node.TEXT_NODE||currentNode.textContent.trim())&&nodes.push(currentNode),walker.nextNode(););return nodes},exports.allTextNodes=function(node){for(var n,a=[],walk=document.createTreeWalker(node,NodeFilter.SHOW_TEXT,null,!1);n=walk.nextNode();)a.push(n);return a}}),dom$1=unwrapExports(dom),dom_1=dom.allChildNodes,dom_2=dom.allTextNodes,dom$2=Object.freeze({default:dom$1,__moduleExports:dom,allChildNodes:dom_1,allTextNodes:dom_2}),objects_1$1=objects$2&&objects$1||objects$2,dom_1$1=dom$2&&dom$1||dom$2,cleanup=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var cleanUpQueue=new WeakMap;exports.registerCleanUp=function(node,task){return objects_1$1.ensure(cleanUpQueue,node,[task])},exports.cleanUp=function(node){return setTimeout(function(){for(var _i=0,_a=dom_1$1.allChildNodes(node);_i<_a.length;_i++){var n=_a[_i];if(cleanUpQueue.has(n)){for(var _b=0,_c=cleanUpQueue.get(n);_b<_c.length;_b++){(0,_c[_b])()}cleanUpQueue.delete(n)}}},80)}}),cleanup$1=unwrapExports(cleanup),cleanup_1=cleanup.registerCleanUp,cleanup_2=cleanup.cleanUp,cleanup$2=Object.freeze({default:cleanup$1,__moduleExports:cleanup,registerCleanUp:cleanup_1,cleanUp:cleanup_2}),strings=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.format=function(str,obj){return str.replace(/{{.*?}}/g,function(m){return objects_1$1.deepValue(obj,m.substring(2,m.length-2))})},exports.namedRegexMatch=function(text,regex,matchNames){var matches=regex.exec(text);if(matches)return matches.reduce(function(result,match,index){return 0<index&&(result[matchNames[index-1]]=match),result},{})},exports.decapitalize=function(str){return str.charAt(0).toLowerCase()+str.substr(1)},exports.camelCaseFromHyphens=function(str){return str.replace(/\b-([a-z])/g,function(all,char){return char.toUpperCase()})}}),strings$1=unwrapExports(strings),strings_1=strings.format,strings_2=strings.namedRegexMatch,strings_3=strings.decapitalize,strings_4=strings.camelCaseFromHyphens,strings$2=Object.freeze({default:strings$1,__moduleExports:strings,format:strings_1,namedRegexMatch:strings_2,decapitalize:strings_3,camelCaseFromHyphens:strings_4}),cleanup_1$1=cleanup$2&&cleanup$1||cleanup$2,strings_1$1=strings$2&&strings$1||strings$2,construct=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConstructRegistry={},exports.Singletons={},exports.start=function(root){void 0===root&&(root=document.documentElement);var createdWidgets=[];return Object.keys(exports.ConstructRegistry).forEach(function(selector){Array.from(root.querySelectorAll(selector)).forEach(function(node){var widget=new(Function.prototype.bind.apply(exports.ConstructRegistry[selector]));exports.runConstructorQueue(widget,node),createdWidgets.push(widget)})}),createdWidgets},exports.Construct=function(conf){return function(proto){exports.ConstructRegistry[conf.selector]=proto,exports.addToConstructorQueue(proto,function(widget,node){if(!0===conf.singleton){var name_1=strings_1$1.decapitalize(widget.constructor.name);exports.Singletons[name_1]=widget,cleanup_1$1.registerCleanUp(node,function(){delete exports.Singletons[name_1]})}widget.init(node)})}};var queue=new WeakMap;exports.addToConstructorQueue=function(constructor,func){objects_1$1.ensure(queue,constructor,[func])},exports.runConstructorQueue=function(widget,node){for(var widgetQueue=queue.get(Object.getPrototypeOf(widget).constructor)||[],i=0,n=widgetQueue.length;i<n;i++)widgetQueue[i].call(widget,widget,node)}}),construct$1=unwrapExports(construct),construct_1=construct.ConstructRegistry,construct_2=construct.Singletons,construct_3=construct.start,construct_4=construct.Construct,construct_5=construct.addToConstructorQueue,construct_6=construct.runConstructorQueue,construct$2=Object.freeze({default:construct$1,__moduleExports:construct,ConstructRegistry:construct_1,Singletons:construct_2,start:construct_3,Construct:construct_4,addToConstructorQueue:construct_5,runConstructorQueue:construct_6});var ListState;!function(css,ref){void 0===ref&&(ref={});var insertAt=ref.insertAt;if(css&&"undefined"!=typeof document){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css","top"===insertAt&&head.firstChild?head.insertBefore(style,head.firstChild):head.appendChild(style),style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css))}}("[hidden] {\n    display: none !important;\n}\n"),function(ListState){ListState[ListState.ALL=0]="ALL",ListState[ListState.COMPLETED=1]="COMPLETED",ListState[ListState.ACTIVE=2]="ACTIVE"}(ListState||(ListState={}));function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r}var functions=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var getType={}.toString;exports.compose=function(fns){return function(res){return 1===fns.length?fns[0](res):fns.reduce(function(p,c){return c(p)},res)}},exports.isFunction=function(functionToCheck){return functionToCheck&&"[object Function]"===getType.call(functionToCheck)},exports.isDef=function(x){return void 0!==x},exports.isUndef=function(x){return!exports.isDef(x)}}),functions$1=unwrapExports(functions),functions_1=functions.compose,functions_2=functions.isFunction,functions_3=functions.isDef,functions_4=functions.isUndef,functions$2=Object.freeze({default:functions$1,__moduleExports:functions,compose:functions_1,isFunction:functions_2,isDef:functions_3,isUndef:functions_4}),construct_1$1=construct$2&&construct$1||construct$2,functions_1$1=functions$2&&functions$1||functions$2,inject=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Inject=function(){return function(proto,property){construct_1$1.addToConstructorQueue(proto.constructor,function(widget){var singleton=construct_1$1.Singletons[property];functions_1$1.isDef(singleton)&&(widget[property]=singleton)})}}}),inject$1=unwrapExports(inject),inject_1=inject.Inject,inject$2=Object.freeze({default:inject$1,__moduleExports:inject,Inject:inject_1}),template=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.parsedTemplates=new WeakMap,exports.SINGLE_CURLIES=/{(.*?)}/,exports.CURLIES=/{{(.*?)}}/;var TemplateTokenType,ALL_CURLIES=/{{(.+?)}}/g;exports.selfClosingTags=/(<([^<>\s]+)(\s+[^<>\s'"=]+(=[\w\d]+|="[^"]*"|='[^']*'|={{?[^}]*?}?})?)*)\s*\/>/gim,exports.openTags="$1></$2>",function(TemplateTokenType){TemplateTokenType[TemplateTokenType.CLASS=0]="CLASS",TemplateTokenType[TemplateTokenType.PROPERTY=1]="PROPERTY",TemplateTokenType[TemplateTokenType.ATTRIBUTE=2]="ATTRIBUTE",TemplateTokenType[TemplateTokenType.TEMPLATE=3]="TEMPLATE",TemplateTokenType[TemplateTokenType.TEXT=4]="TEXT",TemplateTokenType[TemplateTokenType.TAG=5]="TAG"}(TemplateTokenType=exports.TemplateTokenType||(exports.TemplateTokenType={}));var TemplateTokenInfo=function(){function TemplateTokenInfo(position,type){this.position=position,this.type=type}return TemplateTokenInfo.prototype.setCurly=function(value){var tokens=(this._curly=value).split(":");this._path=tokens.shift(),this._transformers=tokens},TemplateTokenInfo.prototype.curly=function(){return this._curly},TemplateTokenInfo.prototype.path=function(){return this._path},TemplateTokenInfo.prototype.transformers=function(){return this._transformers},TemplateTokenInfo.prototype.arrayTransformer=function(){if(1<this._transformers.length)throw Error("Array filter transformer can have only one method");return this.transformers()[0]||"arrayidentity"},TemplateTokenInfo}();exports.TemplateTokenInfo=TemplateTokenInfo,exports.breakApartTextNodes=function(root){for(var textNodes=dom_1$1.allTextNodes(root),i=0,n=textNodes.length;i<n;i++){var node=textNodes[i],split=node.textContent.split(/({{.*?}})/gm);if(1<split.length){for(var parent_1=node.parentNode,frag=document.createDocumentFragment(),_i=0,split_1=split;_i<split_1.length;_i++){var text=split_1[_i];""!==text&&frag.appendChild(document.createTextNode(text))}parent_1.replaceChild(frag,node)}}return root},exports.getFragment=function(html){return document.createRange().createContextualFragment(html)};var ParsedTemplate=function(){function ParsedTemplate(doc,nodes,infos){this.doc=doc,this.infos=infos,this.nodes=nodes}return ParsedTemplate.prototype.clone=function(){var doc=this.doc.cloneNode(!0);return new ParsedTemplate(doc,dom_1$1.allChildNodes(doc),this.infos)},ParsedTemplate}();exports.ParsedTemplate=ParsedTemplate,exports.getTemplate=function(widget,name){void 0===name&&(name="__default__");var proto=Object.getPrototypeOf(widget),templates=exports.parsedTemplates.get(proto);if(functions_1$1.isUndef(templates)||functions_1$1.isUndef(templates[name]))throw Error("No template found for name "+name+" in "+widget.constructor.name);return templates[name].clone()},exports.parseTemplate=function(templateStr){for(var m,source=templateStr.replace(exports.selfClosingTags,exports.openTags),frag=exports.breakApartTextNodes(exports.getFragment(source)),allNodes=dom_1$1.allChildNodes(frag),hookMap={};m=ALL_CURLIES.exec(templateStr);)hookMap[m[1].toLowerCase()]=m[1];return new ParsedTemplate(frag,allNodes,exports.parseHooks(allNodes,hookMap))},exports.parseHooks=function(nodes,hookMap){void 0===hookMap&&(hookMap={});for(var match,hooks=[],selectors=Object.keys(construct_1$1.ConstructRegistry),_loop_1=function(pos,n){var node=nodes[pos];if(node.nodeType===Node.TEXT_NODE){var text=node.textContent,match_1=exports.CURLIES.exec(text);if(null!==match_1)(token=new TemplateTokenInfo(pos,TemplateTokenType.TEXT)).setCurly(match_1[1]),hooks.push(token)}else if(node.nodeType===Node.ELEMENT_NODE){var matchingSelectors=selectors.filter(function(s){return node.matches(s)}),inSubWidget=matchingSelectors.length;if(inSubWidget)for(var _i=0,matchingSelectors_1=matchingSelectors;_i<matchingSelectors_1.length;_i++){var selector=matchingSelectors_1[_i];(token=new TemplateTokenInfo(pos,TemplateTokenType.TAG)).selector=selector,hooks.push(token)}for(var _a=0,_b=Array.from(node.attributes);_a<_b.length;_a++){var attribute=_b[_a],attributeName=attribute.nodeName;if("class"===attributeName)for(var _c=0,classes_1=Array.from(node.classList);_c<classes_1.length;_c++){var cls=classes_1[_c];if(match=cls.match(exports.CURLIES))node.classList.remove(match[0]),(token=new TemplateTokenInfo(pos,TemplateTokenType.CLASS)).setCurly(match[1]),hooks.push(token)}else if(match=attributeName.match(exports.CURLIES)){node.removeAttribute(match[0]),(token=new TemplateTokenInfo(pos,TemplateTokenType.PROPERTY)).setCurly(hookMap[match[1]]),hooks.push(token)}else if(!inSubWidget)if("template"===attributeName){(token=new TemplateTokenInfo(pos,TemplateTokenType.TEMPLATE)).attribute=attributeName,(match=attribute.value.match(exports.CURLIES))?token.setCurly(match[1]):token.setCurly(attribute.value),hooks.push(token)}else{var token,value=attribute.value;if(match=value.match(exports.CURLIES))node.removeAttribute(attributeName),(token=new TemplateTokenInfo(pos,TemplateTokenType.ATTRIBUTE)).setCurly(match[1]),token.attribute=attributeName,hooks.push(token)}}}},pos=0,n=nodes.length;pos<n;pos++)_loop_1(pos);return hooks},exports.Template=function(name){return void 0===name&&(name="__default__"),function(proto,method){var _a,templateStr=proto[method].call(proto),template=exports.parseTemplate(templateStr);objects_1$1.ensure(exports.parsedTemplates,proto,((_a={})[name]=template,_a))}}}),template$1=unwrapExports(template),template_1=template.parsedTemplates,template_2=template.SINGLE_CURLIES,template_3=template.CURLIES,template_4=template.selfClosingTags,template_5=template.openTags,template_6=template.TemplateTokenType,template_7=template.TemplateTokenInfo,template_8=template.breakApartTextNodes,template_9=template.getFragment,template_10=template.ParsedTemplate,template_11=template.getTemplate,template_12=template.parseTemplate,template_13=template.parseHooks,template_14=template.Template,template$2=Object.freeze({default:template$1,__moduleExports:template,parsedTemplates:template_1,SINGLE_CURLIES:template_2,CURLIES:template_3,selfClosingTags:template_4,openTags:template_5,TemplateTokenType:template_6,TemplateTokenInfo:template_7,breakApartTextNodes:template_8,getFragment:template_9,ParsedTemplate:template_10,getTemplate:template_11,parseTemplate:template_12,parseHooks:template_13,Template:template_14}),transformer=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransformerRegistry={arrayidentity:function(){return function(){return!0}}},exports.Transformer=function(){return function(proto,method){construct_1$1.addToConstructorQueue(proto.constructor,function(widget){exports.TransformerRegistry[method]=widget[method].bind(widget)})}}}),transformer$1=unwrapExports(transformer),transformer_1=transformer.TransformerRegistry,transformer_2=transformer.Transformer,transformer$2=Object.freeze({default:transformer$1,__moduleExports:transformer,TransformerRegistry:transformer_1,Transformer:transformer_2}),arrays=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var observers=new WeakMap;exports.removeFromArray=function(arr,elements){if(arr&&0!==arr.length){for(var deleteCount=0,total=elements.length,i=arr.length;i--;)if(~elements.indexOf(arr[i]))deleteCount++;else if(deleteCount){if(arr.splice(i+1,deleteCount),0==(total-=deleteCount)){deleteCount=0;break}deleteCount=0}return deleteCount&&arr.splice(0,deleteCount),arr}};var notify=function(arr,method,args){for(var _i=0,listeners_1=observers.get(arr);_i<listeners_1.length;_i++){listeners_1[_i][method].apply(arr,args)}};exports.range=function(start,end){for(var arr=new Array(end-start+1),i=0,l=arr.length;i<l;i++)arr[i]=i+start;return arr},exports.observeArray=function(arr,listener){var listeners=observers.get(arr);listeners?listeners.push(listener):(observers.set(arr,[listener]),arr.pop=function(){return arr.splice(arr.length-1,1)[0]},arr.push=function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return arr.splice.apply(arr,[arr.length,0].concat(items)),arr.length},arr.fill=function(){throw Error("observed arrays cannot be filled. items must be unique, use Array.splice instead!")},arr.reverse=function(){var ref=arr.slice();return arr.sort(function(a,b){return ref.indexOf(b)-ref.indexOf(a)}),arr},arr.shift=function(){return arr.splice(0,1)[0]},arr.unshift=function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return arr.splice.apply(arr,[0,0].concat(items)),arr.length},function(arr){var old=arr.splice;arr.splice=function(index,deleteCount){var addedItems=[].slice.call(arguments,2),deletedItems=old.apply(arr,arguments);return notify(arr,"splice",[index,deleteCount,addedItems,deletedItems]),deletedItems}}(arr),function(arr){var old=arr.sort;arr.sort=function(cmp){var indices=exports.range(0,arr.length-1),args=cmp?[arr.map(function(e,i){return i}).sort(function(a,b){return cmp(arr[a],arr[b])}).map(function(e){return indices[e]})]:indices,res=old.call(arr,cmp);return notify(arr,"sort",args),res}}(arr))},exports.domArrayListener=function(arr,el,filter,update,onItemAdded){var nodeVisible=[],elementMap=new WeakMap,listener={sort:function(indices){for(var copy=[],i=0;i<indices.length;i++)nodeVisible[indices[i]]&&el.appendChild(elementMap.get(arr[i])),copy[i]=nodeVisible[indices[i]];nodeVisible=copy},splice:function(index,deleteCount,added,deleted){void 0===deleted&&(deleted=[]);var patch=Array.from(nodeVisible),patchHelper=[index,deleteCount].concat(added.map(function(){return!1}));if(nodeVisible.splice.apply(nodeVisible,patchHelper),deleteCount){for(var del=void 0,d=0;d<deleteCount;d++){del=deleted[d];var node=elementMap.get(del);node&&node.parentElement===el&&(el.removeChild(node),cleanup_1$1.cleanUp(node),elementMap.delete(del))}update()}if(added.length){for(var item=void 0,a=0,n=added.length;a<n;a++)item=added[a],elementMap.has(item)||elementMap.set(item,onItemAdded(item));update()}patch.splice.apply(patch,patchHelper);var i=0;for(n=arr.length;i<n;i++){patch[i]=filter(arr[i],i);var itemNode=elementMap.get(arr[i]);if(patch[i]&&!nodeVisible[i]){var nextVisible=nodeVisible.indexOf(!0,i),refNode=~nextVisible?elementMap.get(arr[nextVisible]):void 0;el.insertBefore(itemNode,refNode)}else!patch[i]&&nodeVisible[i]&&itemNode.parentNode===el&&el.removeChild(itemNode)}nodeVisible=patch}};return listener.splice(0,0,arr,[]),cleanup_1$1.registerCleanUp(el,function(){return observers.delete(arr)}),listener}}),arrays$1=unwrapExports(arrays),arrays_1=arrays.removeFromArray,arrays_2=arrays.range,arrays_3=arrays.observeArray,arrays_4=arrays.domArrayListener,arrays$2=Object.freeze({default:arrays$1,__moduleExports:arrays,removeFromArray:arrays_1,range:arrays_2,observeArray:arrays_3,domArrayListener:arrays_4}),computed=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var computedProps=new WeakMap;exports.createComputedListener=function(widget,info,updateDom){var proto=Object.getPrototypeOf(widget);if(!computedProps.has(proto)||!computedProps.get(proto)[info.path()])throw Error("Bound functions must be decorated with @Computed(...paths: string[])");computedProps.get(proto)[info.path()].forEach(function(prop){return objects_1$1.createObjectPropertyListener(widget,prop,function(){return updateDom()})})},exports.Computed=function(){for(var paths=[],_i=0;_i<arguments.length;_i++)paths[_i]=arguments[_i];return function(proto,method){var _a;objects_1$1.ensure(computedProps,proto,((_a={})[method]=paths,_a))}}}),computed$1=unwrapExports(computed),computed_1=computed.createComputedListener,computed_2=computed.Computed,computed$2=Object.freeze({default:computed$1,__moduleExports:computed,createComputedListener:computed_1,Computed:computed_2}),templateNode=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var TemplateNodes=new WeakMap;exports.TemplateNode=function(selector){return function(proto,property){objects_1$1.ensure(TemplateNodes,proto,[{selector:selector,property:property}])}},exports.injectTemplateNodes=function(widget,nodes){var proto=Object.getPrototypeOf(widget),bindings=TemplateNodes.get(proto);if(functions_1$1.isDef(bindings))for(var _i=0,bindings_1=bindings;_i<bindings_1.length;_i++)for(var b=bindings_1[_i],_a=0,nodes_1=nodes;_a<nodes_1.length;_a++){var n=nodes_1[_a];if(widget[b.property]=n.querySelector(b.selector),null!==widget[b.property])break}}}),templateNode$1=unwrapExports(templateNode),templateNode_1=templateNode.TemplateNode,templateNode_2=templateNode.injectTemplateNodes,templateNode$2=Object.freeze({default:templateNode$1,__moduleExports:templateNode,TemplateNode:templateNode_1,injectTemplateNodes:templateNode_2}),template_1$1=template$2&&template$1||template$2,transformer_1$1=transformer$2&&transformer$1||transformer$2,arrays_1$1=arrays$2&&arrays$1||arrays$2,computed_1$1=computed$2&&computed$1||computed$2,template_node_1=templateNode$2&&templateNode$1||templateNode$2,bind=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var subWidgets=new WeakMap,Update=function(){return new CustomEvent("__update__",{bubbles:!0,cancelable:!1,scoped:!1})},updateDomValue=function(node,info,value,oldValue){if(info.type===template_1$1.TemplateTokenType.TEXT)node.textContent=functions_1$1.isDef(value)?value:"";else if(info.type===template_1$1.TemplateTokenType.CLASS)oldValue&&node.classList.remove((""+oldValue).replace(/\s+/g,"-")),value&&node.classList.add((""+value).replace(/\s+/g,"-"));else if(info.type===template_1$1.TemplateTokenType.ATTRIBUTE||info.type===template_1$1.TemplateTokenType.PROPERTY){var attributeName=info.attribute||info.path();if(/checked|value|selectedIndex/i.test(attributeName))node[attributeName]=value;else if(functions_1$1.isUndef(value)||!1===value)node.removeAttribute(attributeName);else{var attrValue=!0===value?"":value;node.setAttribute(attributeName,attrValue)}}return value},updateDom=function(widget,template,transformMap,oldValueMap){for(var domChanged=!1,valueMap=getCurrentValueMap(widget,template,transformMap),info=void 0,i=0,n=template.infos.length;i<n;i++)if((info=template.infos[i]).type!==template_1$1.TemplateTokenType.TAG){var value=valueMap[i];if(info.type!==template_1$1.TemplateTokenType.PROPERTY||!Array.isArray(value))if(value!==ARRAY_TAG){var oldValue=oldValueMap[i];oldValue!==value&&(domChanged=!0,oldValueMap[i]=updateDomValue(template.nodes[info.position],info,value,oldValue))}else widget[info.path()].splice(0,0)}return{change:domChanged,valueMap:oldValueMap}},ARRAY_TAG=new function(){},getInfoValue=function(widget,info,transformMap){var path=info.path(),transformer=transformMap[info.curly()],v=objects_1$1.deepValue(widget,path);return Array.isArray(v)&&functions_1$1.isFunction(transformer(v))?ARRAY_TAG:(v=functions_1$1.isFunction(v)?v.call(widget):v,v=transformer?transformer(v):v)},getCurrentValueMap=function(widget,template,transformMap){for(var map=[],i=0,n=template.infos.length;i<n;i++)map[i]=getInfoValue(widget,template.infos[i],transformMap);return map},bindTemplateInfos=function(template,widget,updateTemplate,transformMap){for(var out_info_1,bound=[],infos=template.infos,_loop_2=function(info,i,n){var path=(info=infos[i]).path(),value=objects_1$1.deepValue(widget,info.path()),node=template.nodes[info.position];if(info.type===template_1$1.TemplateTokenType.TAG)!function(widget,rootInfo,node){var subWidget=new(Function.prototype.bind.apply(construct_1$1.ConstructRegistry[rootInfo.selector]));objects_1$1.ensure(subWidgets,widget,[subWidget]);for(var out_attribute_1,attributes=Array.prototype.slice.call(node.attributes),_loop_1=function(attribute,i,n){var match=(attribute=attributes[i]).value.match(template_1$1.CURLIES),subProp=strings_1$1.camelCaseFromHyphens(attribute.name);if(match){var prop_1=match[1],value=objects_1$1.deepValue(widget,prop_1);if(functions_1$1.isFunction(value))subWidget[subProp]=value.bind(widget);else{if(~prop_1.indexOf(":"))throw Error("Cannot use transformer for "+prop_1);var updateVal_1=function(){return subWidget[subProp]=objects_1$1.deepValue(widget,prop_1),updateVal_1};objects_1$1.addPropertyListener(widget,prop_1,updateVal_1())}node.removeAttribute(attribute.name)}else(match=attribute.value.match(template_1$1.SINGLE_CURLIES))?(subWidget[subProp]=new Function("return "+match[1])(),node.removeAttribute(attribute.name)):subWidget[subProp]=attribute.value;out_attribute_1=attribute},attribute=void 0,i=0,n=attributes.length;i<n;i++)_loop_1(attribute,i),attribute=out_attribute_1;construct_1$1.runConstructorQueue(subWidget,node)}(widget,info,node);else if(info.type===template_1$1.TemplateTokenType.PROPERTY){if(Array.isArray(value)){var templateInfo_1=function(template,position){return template.infos.find(function(i){return i.position===position&&"template"===i.attribute})}(template,info.position),attributeValue_1=node.getAttribute("template")||void 0,templateName=void 0;functions_1$1.isDef(templateInfo_1)&&template_1$1.CURLIES.test(attributeValue_1)?(templateName=function(){return getInfoValue(widget,templateInfo_1,transformMap)},objects_1$1.addPropertyListener(widget,templateInfo_1.path(),function(){value.splice.apply(value,[0,value.length].concat(value))})):templateName=function(){return attributeValue_1},function(array,parentNode,widget,info,templateName,update){var method=info.arrayTransformer(),transformer=(widget[method]||transformer_1$1.TransformerRegistry[method]).bind(widget),listener=arrays_1$1.domArrayListener(array,parentNode,transformer(),update,function(item){var template=template_1$1.getTemplate(item,templateName()),node=template.nodes[1];return construct_1$1.runConstructorQueue(item,node),exports.connectTemplate(item,node,template,parentNode),node});arrays_1$1.observeArray(array,listener)}(value,node,widget,info,templateName,updateTemplate),node.removeAttribute("template")}}else if(functions_1$1.isFunction(value))computed_1$1.createComputedListener(widget,info,updateTemplate);else if(info.type===template_1$1.TemplateTokenType.TEMPLATE){var propInfo=function(template,position){return template.infos.find(function(i){return i.position===position&&i.type===template_1$1.TemplateTokenType.PROPERTY})}(template,info.position);!functions_1$1.isUndef(propInfo)&&Array.isArray(objects_1$1.deepValue(widget,propInfo.path()))||function(widget,node,info,transformMap){var value=getInfoValue(widget,info,transformMap);if(functions_1$1.isDef(value)){var updateTemplateNode_1=function(){var value=getInfoValue(widget,info,transformMap);return exports.render(widget,node,value),updateTemplateNode_1};objects_1$1.addPropertyListener(widget,info.path(),updateTemplateNode_1())}else exports.render(widget,node,info.curly());node.removeAttribute("template")}(widget,node,info,transformMap)}else bound.includes(path)||Array.isArray(value)||(bound.push(path),objects_1$1.createObjectPropertyListener(widget,path,function(){return updateTemplate()}));out_info_1=info},info=void 0,i=0,n=infos.length;i<n;i++)_loop_2(info,i),info=out_info_1};exports.connectTemplate=function(widget,el,template,parentNode){void 0===parentNode&&(parentNode=el.parentNode);var transformMap=function(widget,template){for(var map={},info=void 0,i=0,n=template.infos.length;i<n;i++){var transformers=(info=template.infos[i]).transformers();transformers&&(map[info.curly()]=transformFactory(widget,transformers))}return map}(widget,template),res=updateDom(widget,template,transformMap,[]),updateTemplate=function(){mutedWidget.has(widget)||(res=updateDom(widget,template,transformMap,res.valueMap)).change&&parentNode.dispatchEvent(Update())};el.addEventListener("__update__",updateTemplate,{passive:!0,capture:!1}),bindTemplateInfos(template,widget,updateTemplate,transformMap),template_node_1.injectTemplateNodes(widget,template.nodes)};var transformFactory=function(widget,transformers){return functions_1$1.compose(transformers.map(function(m){var transformer=widget[m]||transformer_1$1.TransformerRegistry[m];if(functions_1$1.isUndef(transformer))throw Error("No transformer found for "+m+". Implement function on "+widget.constructor.name+" or annotate a method with @Transformer()");return transformer.bind(widget)}))};exports.render=function(widget,el,name){for(var children=dom_1$1.allChildNodes(el),node=void 0,i=1,n=children.length;i<n;i++)node=children[i],cleanup_1$1.cleanUp(node),el.removeChild(node);var template=template_1$1.getTemplate(widget,name);exports.connectTemplate(widget,el,template),el.appendChild(template.doc)},exports.findWidgets=function(widget,type){return subWidgets.get(widget).filter(function(t){return Object.getPrototypeOf(t)===type.prototype})},exports.findWidget=function(widget,type){return exports.findWidgets(widget,type)[0]};var mutedWidget=new WeakMap;exports.Batch=function(){return function(proto,method){construct_1$1.addToConstructorQueue(proto.constructor,function(widget,el){var old=widget[method];Object.defineProperty(widget,method,{value:function(){mutedWidget.set(widget,!0),old.apply(widget,arguments),mutedWidget.delete(widget),el.dispatchEvent(Update())}})})}}}),bind$1=unwrapExports(bind),bind_1=bind.connectTemplate,bind_2=bind.render,bind_3=bind.findWidgets,bind_4=bind.findWidget,bind_5=bind.Batch,bind$2=Object.freeze({default:bind$1,__moduleExports:bind,connectTemplate:bind_1,render:bind_2,findWidgets:bind_3,findWidget:bind_4,Batch:bind_5}),event=createCommonjsModule(function(module,exports){var Scope,__assign=commonjsGlobal&&commonjsGlobal.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t};function preventDefault(conf,ev){!0===conf.preventDefault&&ev.preventDefault()}Object.defineProperty(exports,"__esModule",{value:!0}),function(Scope){Scope[Scope.Direct=0]="Direct",Scope[Scope.Delegate=1]="Delegate",Scope[Scope.UntilMatch=2]="UntilMatch"}(Scope=exports.Scope||(exports.Scope={}));var attachEvents=function(conf){return function(widget,node){(Array.isArray(conf.event)?conf.event:[conf.event]).forEach(function(event){Scope.Direct&&functions_1$1.isDef(conf.selector)&&(node=node.querySelector(conf.selector));var handler=function(event,conf,widget,node,direct){return function(ev){if(direct)preventDefault(conf,ev),widget[conf.method].call(widget,ev,node);else{var el=ev.target;do{if(el.nodeType===Node.ELEMENT_NODE&&el.matches(conf.selector))return preventDefault(conf,ev),widget[conf.method].call(widget,ev,el);if(el===node&&conf.scope!==Scope.UntilMatch)break}while(el=el.parentElement)}}}(0,conf,widget,node,conf.scope===Scope.Direct||functions_1$1.isUndef(conf.selector));node.addEventListener(event,handler,conf.options),cleanup_1$1.registerCleanUp(node,function(){return node.removeEventListener(event,handler)})})}};exports.On=function(conf){return function(proto,method){var finalConf=__assign({},conf,{method:method,event:conf.event||method,scope:Scope.Delegate});construct_1$1.addToConstructorQueue(proto.constructor,attachEvents(finalConf))}}}),event$1=unwrapExports(event),event_1=event.Scope,event_2=event.On,event$2=Object.freeze({default:event$1,__moduleExports:event,Scope:event_1,On:event_2}),localStorage=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var storableProperties=new WeakMap,store=function(key,value){window.localStorage.setItem(key,JSON.stringify({value:value}))},load=function(key){var json=window.localStorage.getItem(key);if(json)return JSON.parse(json).value},storeQueue=new WeakMap,handler=function(prop,arrayType){return function(widget){var arr,callback,listener,storeKey=function(widget){var id=widget.id||widget.name||widget.title||widget.constructor.name;return functions_1$1.isFunction(id)?id():id}(widget)+"."+prop,value=widget[prop];if(Array.isArray(value)){var type_1=functions_1$1.isDef(arrayType)?arrayType():void 0;if(functions_1$1.isUndef(type_1))throw Error("Stored array '"+prop+"' needs an arrayType factory argument");try{var tryValue=function(key,proto){var props=storableProperties.get(proto),arr=load(key);if(arr&&!functions_1$1.isUndef(props))return arr.map(function(i){return props.reduce(function(p,c){return p[c]=i[c],p},new(Function.prototype.bind.apply(proto)))})}(storeKey,type_1);functions_1$1.isDef(tryValue)&&(value=widget[prop]=tryValue)}catch(e){console.warn("LocalStorage loading failed...ignoring")}arr=value,listener={sort:callback=function(){var key,arr,proto;key=storeKey,arr=value,proto=type_1,storeQueue.has(arr)&&clearTimeout(storeQueue.get(arr)),storeQueue.set(arr,setTimeout(function(){var props=storableProperties.get(proto);if(functions_1$1.isUndef(props))throw Error("@LocalStorage array items must have at least one @Storable() property");var value=arr.map(function(i){return objects_1$1.getSubset(props,i)});store(key,value)},80))},splice:function(i,d,a){a.length&&a.forEach(function(item){var proto=Object.getPrototypeOf(item);storableProperties.get(proto.constructor).forEach(function(prop){objects_1$1.addPropertyListener(item,prop,callback)})}),(a.length||0<d)&&callback()}},arrays_1$1.observeArray(arr,listener),listener.splice(0,0,arr)}else{tryValue=load(storeKey);functions_1$1.isDef(tryValue)&&(widget[prop]=tryValue),objects_1$1.addPropertyListener(widget,prop,function(){store(storeKey,widget[prop])})}}};exports.LocalStorage=function(arrayType){return function(proto,property){construct_1$1.addToConstructorQueue(proto.constructor,handler(property,arrayType))}},exports.Storable=function(){return function(proto,property){objects_1$1.ensure(storableProperties,proto.constructor,[property])}}}),localStorage$1=unwrapExports(localStorage),localStorage_1=localStorage.LocalStorage,localStorage_2=localStorage.Storable,localStorage$2=Object.freeze({default:localStorage$1,__moduleExports:localStorage,LocalStorage:localStorage_1,Storable:localStorage_2}),router=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.routeListeners={};var namedRx=/[:*]\w+/gi,historyAPI=window.history&&window.history.pushState&&null===document.querySelector('[routing="hash"]'),rules=[[/:\w+/gi,"([\\w\\d-]+)"],[/\*\w+/gi,"(.+)"]],getCurrentRoute=function(){var path=location.pathname;return historyAPI||("/"!==path?location.replace("/#"+path):path=location.hash?location.hash.replace(/^#/,""):"/"),path},notifyListeners=function(route){Object.values(exports.routeListeners).forEach(function(handlers){return handlers.forEach(function(rh){var matchedParams=function(pattern,input){var names=pattern.match(namedRx);if(names&&names.length){names=names.map(function(str){return str.substr(1)});var repl=rules.reduce(function(p,c){return p.replace(c[0],c[1])},pattern),finalR=new RegExp("^"+repl+"$","gi");return strings_1$1.namedRegexMatch(input,finalR,names)}if(new RegExp("^"+pattern+"$","gi").exec(input))return{}}(rh.route,route);matchedParams&&rh.callback(matchedParams)})})};exports.navigate=function(path){historyAPI?(history.pushState(null,"",path),notifyListeners(getCurrentRoute())):location.hash=path},exports.runRoutes=function(){window.blockRouting||notifyListeners(getCurrentRoute()),window.addEventListener(historyAPI?"popstate":"hashchange",function(){return notifyListeners(getCurrentRoute())},!1)},exports.Route=function(route){return function(proto,method){construct_1$1.addToConstructorQueue(proto.constructor,function(widget,node){exports.routeListeners[route]||(exports.routeListeners[route]=[]);var handler={route:route,callback:widget[method].bind(widget)};exports.routeListeners[route].push(handler),cleanup_1$1.registerCleanUp(node,function(){return exports.routeListeners[route].splice(exports.routeListeners[route].indexOf(handler),1)})})}}}),router$1=unwrapExports(router),router_1=router.routeListeners,router_2=router.navigate,router_3=router.runRoutes,router_4=router.Route,router$2=Object.freeze({default:router$1,__moduleExports:router,routeListeners:router_1,navigate:router_2,runRoutes:router_3,Route:router_4}),Click=function(selector){return event_2({selector:selector,event:"click",preventDefault:!0})},Todo=(function(){function TodoList(){var _this=this;this.state=ListState.ALL,this.todos=[],this.init=function(el){bind_2(_this,el)},this.listFilter=function(){return function(todo){return _this.state===ListState.ALL||_this.state===ListState.COMPLETED&&todo.completed||_this.state===ListState.ACTIVE&&!todo.completed}},this.stateAll=function(s){return _this.selectedState(s,ListState.ALL)},this.stateActive=function(s){return _this.selectedState(s,ListState.ACTIVE)},this.stateCompleted=function(s){return _this.selectedState(s,ListState.COMPLETED)},this.isEmpty=function(){return 0===_this.todos.length},this.noCompleted=function(){return 0===_this.completed()},this.pluralize=function(){return 1===_this.active()?"item":"items"},this.allCompleted=function(){return _this.completed()===_this.todos.length},this.active=function(){return _this.todos.length-_this.completed()},this.completed=function(){return _this.todos.filter(function(c){return c.completed}).length},this.selectedState=function(s,state){return s===state?"selected":void 0}}TodoList.prototype.newTodo=function(todo){this.todos.push(todo)},TodoList.prototype.deleteTodo=function(todo){arrays_1(this.todos,[todo])},TodoList.prototype.locationPath=function(params){"active"===params.path?this.state=ListState.ACTIVE:"completed"===params.path&&(this.state=ListState.COMPLETED)},TodoList.prototype.root=function(){this.state=ListState.ALL},TodoList.prototype.clearCompleted=function(){arrays_1(this.todos,this.todos.filter(function(t){return t.completed}))},TodoList.prototype.toggleAll=function(){var state=!this.allCompleted();this.todos.forEach(function(t){return t.completed=state})},TodoList.prototype.toHtml=function(){return'\n        <header class="header"/>\n        <section class="main">\n          <input class="toggle-all" type="checkbox" checked="{{todos:allCompleted}}">\n          <label for="toggle-all" hidden="{{todos:isEmpty}}">Mark all as complete</label>\n          <ul class="todo-list" {{todos:listFilter}}/>\n        </section>\n        <footer class="footer" hidden="{{todos:isEmpty}}">\n          <span class="todo-count"><strong>{{todos:active}}</strong> {{todos:pluralize}} left</span>\n          <ul class="filters">\n            <li><a class="{{state:stateAll}}" href="#/">All</a></li>\n            <li><a class="{{state:stateActive}}" href="#/active">Active</a></li>\n            <li><a class="{{state:stateCompleted}}" href="#/completed">Completed</a></li>\n          </ul>\n          <button class="clear-completed" hidden="{{todos:noCompleted}}">Clear completed</button>\n        </footer>'},__decorate([localStorage_1(function(){return Todo})],TodoList.prototype,"todos",void 0),__decorate([router_4("/:path")],TodoList.prototype,"locationPath",null),__decorate([router_4("/")],TodoList.prototype,"root",null),__decorate([Click(".clear-completed")],TodoList.prototype,"clearCompleted",null),__decorate([Click('label[for="toggle-all"]'),bind_5()],TodoList.prototype,"toggleAll",null),__decorate([template_14()],TodoList.prototype,"toHtml",null),TodoList=__decorate([construct_4({selector:".todoapp",singleton:!0})],TodoList)}(),function(){function Todo(name,completed){void 0===completed&&(completed=!1),this.editing=!1,this.completedClass=function(completed){return completed?"completed":void 0},this.editingClass=function(editing){return editing?"editing":void 0},this.completed=completed,this.name=name}return Todo.prototype.complete=function(ev){this.completed=ev.target.checked},Todo.prototype.deleteSelf=function(){this.todoList.deleteTodo(this)},Todo.prototype.startEditing=function(){this.edit.value=this.name,this.editing=!0,this.edit.focus()},Todo.prototype.endEditing=function(ev){13===ev.keyCode&&(this.name=this.edit.value.trim(),this.name||this.todoList.deleteTodo(this),this.stopEditing())},Todo.prototype.cancelEditing=function(ev){27===ev.keyCode&&this.stopEditing()},Todo.prototype.stopEditing=function(){this.editing=!1},Todo.prototype.toHtml=function(){return'\n        <li class="{{completed:completedClass}} {{editing:editingClass}}">\n          <div class="view">\n            <input class="toggle" type="checkbox" checked="{{completed}}">\n            <label>{{name}}</label>\n            <button class="destroy"></button>\n          </div>\n          <input class="edit" placeholder="Create a TodoMVC template" value="{{name}}">\n        </li>'},__decorate([localStorage_2()],Todo.prototype,"completed",void 0),__decorate([localStorage_2()],Todo.prototype,"name",void 0),__decorate([inject_1()],Todo.prototype,"todoList",void 0),__decorate([templateNode_1(".edit")],Todo.prototype,"edit",void 0),__decorate([event_2({event:"click",selector:".toggle"})],Todo.prototype,"complete",null),__decorate([Click(".destroy")],Todo.prototype,"deleteSelf",null),__decorate([event_2({event:"dblclick",selector:"label"})],Todo.prototype,"startEditing",null),__decorate([event_2({event:"keyup",selector:".edit"})],Todo.prototype,"endEditing",null),__decorate([event_2({event:"keyup",scope:event_1.Direct})],Todo.prototype,"cancelEditing",null),__decorate([event_2({event:["blur","focusout"],selector:"input.edit",scope:event_1.Direct})],Todo.prototype,"stopEditing",null),__decorate([template_14()],Todo.prototype,"toHtml",null),Todo}()),fetch_1=(function(){function Header(){}Header.prototype.init=function(element){bind_2(this,element)},Header.prototype.createTodo=function(ev){var e=this.edit;13===ev.keyCode&&e.value.trim()&&(this.todoList.newTodo(new Todo(e.value)),e.value="")},Header.prototype.toHtml=function(){return'\n            <h1>todos</h1>\n            <input class="new-todo" id="new-todo" placeholder="What needs to be done?" autofocus>\n        '},__decorate([inject_1()],Header.prototype,"todoList",void 0),__decorate([templateNode_1("input")],Header.prototype,"edit",void 0),__decorate([event_2({event:"keypress",selector:"input",scope:event_1.Direct})],Header.prototype,"createTodo",null),__decorate([template_14()],Header.prototype,"toHtml",null),Header=__decorate([construct_4({selector:".header"})],Header)}(),createCommonjsModule(function(module,exports){var extendStatics,__extends=commonjsGlobal&&commonjsGlobal.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=commonjsGlobal&&commonjsGlobal.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t};Object.defineProperty(exports,"__esModule",{value:!0});var fetchErrors=new WeakMap,defaultProcessor=function(res){return res.json()},handleErrors=function(response){if(!response.ok)throw new ResponseError(response.statusText,response);return response},ResponseError=function(_super){function ResponseError(message,response){var _this=_super.call(this,message)||this;return _this.response=response,_this}return __extends(ResponseError,_super),ResponseError}(Error),Xhr=function(fetchMethod){return function(conf){return function(proto,method){construct_1$1.addToConstructorQueue(proto.constructor,function(widget){var oldMethod=proto[method];widget[method]=function(body){var payload=[body].filter(functions_1$1.isDef).map(function(body){return"string"==typeof body?body:JSON.stringify(body)}),finalConf=Object.keys(conf).reduce(function(p,c){return(p[c]=functions_1$1.isFunction(p[c])?p[c].call(widget):p[c])&&p},__assign({},conf,{url:strings_1$1.format(conf.url,widget),body:payload[0],method:fetchMethod}));return function(url,conf,processor){return void 0===processor&&(processor=defaultProcessor),fetch(url,conf).then(handleErrors).then(processor)}(finalConf.url,finalConf,finalConf.processor).then(function(res){return oldMethod.apply(widget,payload.concat([res])),res}).catch(function(error){if(fetchErrors.has(proto)){var errFunc=fetchErrors.get(proto)[""+error.response.status];errFunc&&widget[errFunc].call(widget,error)}})}})}}};exports.Get=Xhr("GET"),exports.Post=Xhr("POST"),exports.Delete=Xhr("DELETE"),exports.Put=Xhr("PUT"),exports.FetchError=function(status){return function(proto,method){var _a;objects_1$1.ensure(fetchErrors,proto,((_a={})[""+status]=method,_a))}}})),fetch$1=unwrapExports(fetch_1),fetch_2=fetch_1.Get,fetch_3=fetch_1.Post,fetch_4=fetch_1.Delete,fetch_5=fetch_1.Put,fetch_6=fetch_1.FetchError,fetch$2=Object.freeze({default:fetch$1,__moduleExports:fetch_1,Get:fetch_2,Post:fetch_3,Delete:fetch_4,Put:fetch_5,FetchError:fetch_6}),mediaQuery=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaQuery=function(query){return function(proto,method){construct_1$1.addToConstructorQueue(proto.constructor,function(widget,node){var handler=function(mq){return mq.matches&&widget[method].call(widget,node),handler},mediaQueryList=window.matchMedia(query);mediaQueryList.addListener(handler(mediaQueryList)),cleanup_1$1.registerCleanUp(node,function(){return mediaQueryList.removeListener(handler)})})}}}),mediaQuery$1=unwrapExports(mediaQuery),mediaQuery_1=mediaQuery.MediaQuery,mediaQuery$2=Object.freeze({default:mediaQuery$1,__moduleExports:mediaQuery,MediaQuery:mediaQuery_1}),require$$6=event$2&&event$1||event$2,require$$7=fetch$2&&fetch$1||fetch$2,require$$8=localStorage$2&&localStorage$1||localStorage$2,require$$9=mediaQuery$2&&mediaQuery$1||mediaQuery$2,require$$10=router$2&&router$1||router$2,require$$13=inject$2&&inject$1||inject$2,require$$15=bind$2&&bind$1||bind$2,feather=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var functions_1=functions_1$1;exports.isDef=functions_1.isDef,exports.isUndef=functions_1.isUndef,exports.isFunction=functions_1.isFunction,exports.compose=functions_1.compose;var arrays_1=arrays_1$1;exports.observeArray=arrays_1.observeArray,exports.range=arrays_1.range,exports.removeFromArray=arrays_1.removeFromArray;var objects_1=objects_1$1;exports.ensure=objects_1.ensure,exports.addPropertyListener=objects_1.addPropertyListener,exports.deepValue=objects_1.deepValue,exports.getSubset=objects_1.getSubset,exports.isObject=objects_1.isObject,exports.merge=objects_1.merge;var dom_1=dom_1$1;exports.allChildNodes=dom_1.allChildNodes,exports.allTextNodes=dom_1.allTextNodes;var computed_1=computed_1$1;exports.Computed=computed_1.Computed;var construct_1=construct_1$1;exports.start=construct_1.start,exports.addToConstructorQueue=construct_1.addToConstructorQueue,exports.Construct=construct_1.Construct;var event_1=require$$6;exports.On=event_1.On,exports.Scope=event_1.Scope;var fetch_1=require$$7;exports.Delete=fetch_1.Delete,exports.Get=fetch_1.Get,exports.Post=fetch_1.Post,exports.Put=fetch_1.Put;var local_storage_1=require$$8;exports.Storable=local_storage_1.Storable,exports.LocalStorage=local_storage_1.LocalStorage;var media_query_1=require$$9;exports.MediaQuery=media_query_1.MediaQuery;var router_1=require$$10;exports.navigate=router_1.navigate,exports.runRoutes=router_1.runRoutes;var transformer_1=transformer_1$1;exports.Transformer=transformer_1.Transformer;var inject_1=require$$13;exports.Inject=inject_1.Inject;var template_1=template_1$1;exports.Template=template_1.Template;var template_node_1$$1=template_node_1;exports.TemplateNode=template_node_1$$1.TemplateNode;var bind_1=require$$15;exports.findWidget=bind_1.findWidget,exports.findWidgets=bind_1.findWidgets,exports.render=bind_1.render,exports.Batch=bind_1.Batch;var cleanup_1=cleanup_1$1;exports.registerCleanUp=cleanup_1.registerCleanUp});unwrapExports(feather);feather.isDef,feather.isUndef,feather.isFunction,feather.compose,feather.observeArray,feather.range,feather.removeFromArray,feather.ensure,feather.addPropertyListener,feather.deepValue,feather.getSubset,feather.isObject,feather.merge,feather.allChildNodes,feather.allTextNodes,feather.Computed,feather.start,feather.addToConstructorQueue,feather.Construct,feather.On,feather.Scope,feather.Delete,feather.Get,feather.Post,feather.Put,feather.Storable,feather.LocalStorage,feather.MediaQuery,feather.navigate;var feather_30=feather.runRoutes;feather.Transformer,feather.Inject,feather.Template,feather.TemplateNode,feather.findWidget,feather.findWidgets,feather.render,feather.Batch,feather.registerCleanUp;return construct_3(),feather_30(),{}}();
//# sourceMappingURL=todomvc.min.js.map